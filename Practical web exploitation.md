# Practical web exploitation

https://www.youtube.com/watch?v=ik2p4Rz4QzM&list=WL&index=21

## Lab setup:

- get Secure Bank from GitHub
  - it has OWASP top 10 vulnerabilities.

# Basic:

- Web application is basically just Client and server. Client gets data from server and parses it.

- They communicate using `TCP`.

- Anytime when client and server communicate we need to define Application level protocol.

- We have `FTP`, `SSH` they all run over `TCP`. For web application we have `HTTP`.

- `HTTP` is ASCII based protocol so everything is just in text.

- we can use `curl` to see a HTTP request.
  
  ```html
  $ curl -v https://github.com/
  
  > GET / HTTP/2
  > Host: github.com
  > user-agent: curl/7.81.0
  > accept: */*
  ```
  
  - this is the request sent. now we can see we did a `GET` request and we want what is at the root `/`.
  - Similarly we also get a response from the website with much information.

- Now websites have 3 languages in the frontend. `HTML`, `CSS`, `JS`.

- So when HTML is rendered it creates a DOM (Document Object Model). Without `JS` the DOM is always static. `JS` change the DOM based on user.

- We will mostly focus on Backend, i.e. server.

---

### Web Client:

- So this is what the user uses to view our site. Basically a browser.

### Web Server:

- This is what actually sends us the request.
- Web server only serves and receives the information, it does not perform any computation on it.
- They are basically Apache or Nginx.

### Web Application:

- This is what performs computation on data (either from database or user data received from web server) and returns the data to web server.

- This is only required in Dynamic website like GitHub or bank application.

- Static website does  not require this since they only serve normal `HTML` pages and all data is same for all users. There is no concept of session  or user.
  
  - This used to be true during early years of internet.
  - Now most websites have web application since every user needs different response.

- So when we need to change the DOM in client side we have `JS` but when we need to change the DOM on server side we have Web application.
  
  - E.G. Online games like snake can be made using only `JS`. but a e-commerce website may have admin login different from the rest if the users. This needs to be rendered in the backend.
    
    ---

> We will attack web application since they are written by only a few people and it is different for each website. Web servers and web clients on the other hand are meticulously tested and watched by the open source community. Web applications are mostly closed sourced and more vulnerable to attack. We can attack web client and web server but if we are watching this video or reading these notes then it is above out pay grade right now.

---

- HTTP is stateless. It means every request is it’s new request and have no context of the previous once. But web applications need state. So they do that with Cookies or JWT mostly.
- So we can sent cleverly crafted HTTP request to the server using our own best tool called burp suite.

### Burp Suite:

- We start a proxy listener in burp suite and connect our browser to the proxy. so basically it’s a man in the middle.

- We can see all the requests and if we do intercept on we will stop the request before it going to the web server. Now we can make any change we want to the request.

- Now we have a lot of things in it. What we will use a lot is intercept and repeater.

- in Repeater we can capture a request that we are sending and make changes to it and send it again and again.

- Now when we browse and there is a proxy in between we will have an issue with TLS. Since we are talking to the proxy and the proxy SSL is not trusted by the browser we will have an error (Lock in website will be red).
  
  - To solve that just open Burp suite on browser (goto link where proxy is running).
  - Download the CA certificate.
  - Add that certificate to the browser as trusted.

- Next, We only want to see traffic related to the website we are playing around in. like [localhost](http://localhost) in this case. But right now we have traffic from every website we are visiting.
  
  - To solve this and only intercept the traffic top a particular website. Goto Target tab and on the left side right click on the website you want and Add it to scope.
  - After that you can also go in filter in Proxy tab and check Only show in scope traffic.
  - Filter is important, play around with that.